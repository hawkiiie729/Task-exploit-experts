const mongoose = require("mongoose");
const emailValidator = require("email-validator");

const db_link =
  "mongodb+srv://mishrafirehawk729:sudhanshu@cluster0.qqdaeuj.mongodb.net/?retryWrites=true&w=majority";

try {
  mongoose
    .connect(db_link)
    .then(function (db) {
      // console.log(db);
      console.log("user db connected");
    })
    .catch(function (err) {
      console.log(err);
    });
} catch (err) {
  console.log(err.message);
}

const userSchema = mongoose.Schema({
  name: {
    type: String,
    required: true,
  },
  email: {
    type: String,
    required: true,
    unique: true,
    validate: function () {
      return emailValidator.validate(this.email); //this me schema bn k aata h..usme se email nikal do
    },
  },
  password: {
    type: String,
    required: true,
    minLength: 8,
  },
//   profileImage: {
//     type: String,
//     default: "img/users/default.jpg",
//   },
});

const userModel = mongoose.model("userModel", userSchema);
console.log("usermodel->", userModel);

module.exports = userModel;
